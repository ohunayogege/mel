<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="Askbootstrap">
    <meta name="author" content="Askbootstrap">
    <title>Login - Video Streaming Website HTML Template</title>

    <link rel="icon" type="image/png" href="/static/img/favicon.png">

    <link href="/static/vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet">

    <link href="/static/vendor/fontawesome-free/css/all.min.css" rel="stylesheet" type="text/css">

    <link href="/static/css/osahan.css" rel="stylesheet">

    <link rel="stylesheet" href="/static/vendor/owl-carousel/owl.carousel.css">
    <link rel="stylesheet" href="/static/vendor/owl-carousel/owl.theme.css">
</head>
<body class="login-main-body">
    <section class="login-main-wrapper">
        <div class="container-fluid pl-0 pr-0">
            <div class="row no-gutters">
                <div class="col-md-5 p-5 bg-white full-height">
                    <div class="login-main-left">
                        <div class="text-center mb-5 login-main-left-header pt-4">
                            <img src="/static/img/favicon.png" class="img-fluid" alt="LOGO">
                            <h5 class="mt-3 mb-3">Welcome to Vidoe</h5>
                            <p>It is a long established fact that a reader <br> will be distracted by the readable.</p>
                        </div>
                        <form id="login">
                            <div id="output" class="text-center text-primary font-weight-medium alert"></div>
                            <div class="form-group">
                                <label>Email Address</label>
                                <input type="text" id="email" class="form-control" placeholder="Enter Email Address">
                            </div>
                            <div class="form-group">
                                <label>Password</label>
                                <input type="password" id="password" class="form-control" placeholder="Password">
                            </div>
                            <div class="text-right mt-3">
                                <p class="light-gray"><a href="{% url 'reset_pass' %}">Forgot Password?</a></p>
                            </div>
                            <div class="mt-4">
                                <div class="row">
                                    <div class="col-12">
                                        <button type="submit" id="loginBtn" class="btn btn-outline-primary btn-block btn-lg">Sign In</button>
                                    </div>
                                </div>
                            </div>
                        </form>
                        <div class="text-center mt-5">
                            <p class="light-gray">Don’t have an account? <a href="{% url 'register' %}">Sign Up</a></p>
                        </div>
                    </div>
                </div>
                <div class="col-md-7">
                    <div class="login-main-right bg-white p-5 mt-5 mb-5">
                        <div class="owl-carousel owl-carousel-login">
                            <div class="item">
                                <div class="carousel-login-card text-center">
                                    <img src="/static/img/login.png" class="img-fluid" alt="LOGO">
                                    <h5 class="mt-5 mb-3">​Watch videos offline</h5>
                                    <p class="mb-4">when an unknown printer took a galley of type and scrambled<br> it to make a type specimen book. It has survived not <br>only five centuries</p>
                                </div>
                            </div>
                            <div class="item">
                                <div class="carousel-login-card text-center">
                                    <img src="/static/img/login.png" class="img-fluid" alt="LOGO">
                                    <h5 class="mt-5 mb-3">Download videos effortlessly</h5>
                                    <p class="mb-4">when an unknown printer took a galley of type and scrambled<br> it to make a type specimen book. It has survived not <br>only five centuries</p>
                                </div>
                            </div>
                            <div class="item">
                                <div class="carousel-login-card text-center">
                                    <img src="/static/img/login.png" class="img-fluid" alt="LOGO">
                                    <h5 class="mt-5 mb-3">Create GIFs</h5>
                                    <p class="mb-4">when an unknown printer took a galley of type and scrambled<br> it to make a type specimen book. It has survived not <br>only five centuries</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <script src="/static/vendor/jquery.min.js"></script>
    <script src="/static/vendor/jquery/jquery.min.js" type="f574efadfa4196e447c0363c-text/javascript"></script>
    <script src="/static/vendor/bootstrap/js/bootstrap.bundle.min.js" type="f574efadfa4196e447c0363c-text/javascript"></script>
    <script src="/static/vendor/jquery-easing/jquery.easing.min.js" type="f574efadfa4196e447c0363c-text/javascript"></script>
    <script src="/static/vendor/owl-carousel/owl.carousel.js" type="f574efadfa4196e447c0363c-text/javascript"></script>
    <script src="/static/js/custom.js" type="f574efadfa4196e447c0363c-text/javascript"></script>
    <script src="/static/vendor/rocket-loader.min.js" data-cf-settings="f574efadfa4196e447c0363c-|49" defer=""></script>

    <script type="text/javascript">
        // Get Form and Sumbit
        $('#login').on('submit', function(e){
    
            e.preventDefault();
    
              $.ajax({
                   type : "POST",
                   url: "{% url 'login_rest' %}", /* django ajax posting url  */
                   data: {
                    email : $('#email').val(),
                    password : $('#password').val(),
                    csrfmiddlewaretoken: '{{ csrf_token }}',
                    dataType: "json",
    
                   },

                   beforeSend: function() {
                    $("#loginBtn").text("Please Wait...");
                   },
                   
                   success: function(data){
                    $("#loginBtn").text("Sign In");
                    if (data.error){
                        $('#login').find('.alert').removeClass('alert-success');
                        $('#login').find('.alert').removeClass('none');
                        $('#login').find('.alert').addClass('alert-warning');
                        $('#output').html(data.error) /* response message */
                    }
                    else{
                        $('#login').find('.alert').removeClass('alert-warning');
                        $('#login').find('.alert').removeClass('none');
                        $('#login').find('.alert').addClass('alert-success');
                        $('#output').html(data.success) /* response message */
                        // window.setTimeout(function(){
                        //     $('#signin').find('input[type=text], textarea').val('');
                        // }, 700);
                        setTimeout(redirect, 3000);
                        function redirect(){
                           window.location.href = "{% url 'home' %}";
                        }
                    }
                    
                   },
    
                   failure: function() {
              //       console.log(typeof(data.msg));
                    // $('.alert').html(data.msg+"hello")
                       
                   }
    
    
           });
        });
    </script>
</body>
</html>